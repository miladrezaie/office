<!DOCTYPE HTML>

<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>اتوماسیون آفیش </title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>

    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/table.css}"/>
    <script type="text/javascript" th:src="@{/js/main.js}" src="../static/js/main.js"></script>
    <script type="text/javascript" th:src="@{/js/jqueryAjaxGet.js}" src="../static/js/jqueryAjaxGet.js"></script>
</head>

<style>
    table {
        direction: rtl;
        text-align: right;
    }

    .btnn {
        color: black;
        background-color: blue;
        border-bottom-color: #000;
        border-radius: 2px;
        width: 80px;
    }

    .btnn:hover {
        color: black;
        background-color: red;
        border-radius: 5px;
        width: 110px;
        height: 30px;
    }

    table th {
        text-align: justify;
        padding: 5px;
        text-align: right;
        direction: rtl;
        background-color: #BECAD6;
        border-color: #5f6779;
        border: solid 2px;
    }

    table td {
        text-align: justify;
        padding: 5px;
        text-align: right;
        direction: rtl;
        /*background-color: #dcdcdc;*/
        /*border: solid 2px;*/
        /*border-color: #92a3f7;*/
    }

    .message {
        color: blue;
    }

</style>
<body style="font-size: 14px;">
<div>
    <div class="container" style="direction: rtl; padding-right: 5%; ">
        <!-- Include _menu.html -->
        <th:block th:include="/_menu"></th:block>

        <h3 align="right" th:text="${form.getType().getDisplayName()}"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
        </h3>
        <h3 align="left" th:text="${form.getTarikhsodur()}"></h3>

        <table border="3" style="float: right;">
            <tr>
                <th>
                    <div class="form-group">
                        <label for="program" class="form-control-label">نام آفیش:</label><br>
                        [[${form.program.getName()}]]
                    </div>
                </th>
                <th>
                    <div class="form-group">
                        <label for="tahayekonande" class="form-control-label">تهیه کننده:</label><br>
                        [[${form.tahayekonande}]]
                    </div>
                </th>
                <th>
                    <div class="form-group">
                        <label for="tarikh" class="form-control-label ">تاریخ آفیش :</label><br>
                        از
                        <span th:text="${form.getDate_begin()}"></span>
                        تا<br>
                        <span th:text="${form.getDate_end()}"></span>
                    </div>
                </th>
                <th>
                    <div class="form-group">
                        <label for="saat" class="form-control-label">ساعت شروع ضبط:</label><br>
                        [[${form.saat_zabt}]]
                    </div>
                    <div class="form-group">
                        <label for="saat" class="form-control-label">ساعت پایان ضبط:</label><br>
                        [[${form.saat_zabt_end}]]
                    </div>
                </th>

            </tr>
            <tr>
                <td>ردیف</td>
                <td>عوامل آفیش</td>
                <td width="300px">نام و نام خانوادگی</td>
                <td width="300px">تجهیزات همراه</td>
            </tr>
            <tbody>
            <tr th:each="user : ${form.getUsers()}">
                <td th:text="${form.getId()}"></td>
                <td th:text="${user.getJob().getName()}"></td>
                <td th:text="${user.getFullname()}"></td>
                <td>
                    <ul th:each="taj : ${form.getTajhizatss()}">
                        <li th:text="${taj.getName() + ' -- '+taj.getType()}"></li>
                    </ul>
                </td>
            </tr>

            </tbody>
        </table>
        <table border="3">
            <thead>
            <tr>
                <th>
                    <div class="form-group">
                        <label for="location" class="form-control-label">محل آفیش:</label><br>
                        [[${form.location.getName()}]]
                    </div>
                </th>
            </tr>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td width="300px"> امضا</td>
            </tr>
            <tr>
                <td>مدیر واحد درخواست کننده<br>
                    <img th:if="${form.getMdarkhastemza()} != null" width="85px"
                         th:src="*{'data:emza/jpg;base64,'+{form.getMdarkhastemza()}}" class="img-responsive"
                         style="direction: ltr;">
                    <br>
                    <th:block
                            sec:authorize="hasAuthority('OP_MODEIR_VAHED_DARKHST_KONANDEH')">
                        <form th:action="@{/saveEmza}" method="post">
                            <input type="hidden" name="uid" th:value="${user.id}">
                            <input type="hidden" name="fid" th:value="${form.id}">
                            <input th:if="${form.getMdarkhastemza() != null}" type="submit" class="btn btn-success"
                                   value="تایید شد" disabled>
                            <input th:if="${form.getMdarkhastemza() == null}" type="submit" class="btn btn-warning"
                                   value="تایید?">
                        </form>
                    </th:block>
                    امضای تهیه کننده
                    <img th:if="${form.getTahayeemza()} != null" width="85px"
                         th:src="*{'data:emza/jpg;base64,'+{form.getTahayeemza()}}" class="img-responsive"
                         style="direction: ltr;">
                    <br>
                    <th:block
                            sec:authorize="hasAuthority('OP_TAHIEKONANDEH')">
                        <form th:action="@{/saveEmza}" method="post">
                            <input type="hidden" name="uid" th:value="${user.id}">
                            <input type="hidden" name="fid" th:value="${form.id}">
                            <input th:if="${form.getTahayeemza() != null}" type="submit" class="btn btn-success"
                                   value="تایید شد" disabled>
                            <input th:if="${form.getTahayeemza() == null}" type="submit" class="btn btn-warning"
                                   value="تایید?">
                        </form>
                    </th:block>
                    <br>

                    <hr>امضای مدیر واحد پشتیبانی فنی
                    <img th:if="${form.getPoshemza()} != null" width="85px"
                         th:src="*{'data:emza/jpg;base64,'+{form.getPoshemza()}}" class="img-responsive"
                         style="direction: ltr;">
                    <br>
                    <th:block
                            sec:authorize="hasAuthority('OP_MODIR_POSHTIBANIT')">
                        <form th:action="@{/saveEmza}" method="post">
                            <input type="hidden" name="uid" th:value="${user.id}">
                            <input type="hidden" name="fid" th:value="${form.id}">
                            <input th:if="${form.getPoshemza() != null}" type="submit" class="btn btn-success"
                                   value="تایید شد" disabled>
                            <input th:if="${form.getPoshemza() == null}" type="submit" class="btn btn-warning"
                                   value="تایید?">
                        </form>
                    </th:block>
                </td>
            </tr>

            </tbody>
        </table>

        <hr>
        <table style="direction: rtl;" class="table table-hover" border="1">
            <tr>
                <th:block sec:authorize="hasAuthority('OP_ANBARDAR')">
                    <th >مضای انبار دار<br>
                        <img th:if="${form.getAnbaremza()} != null" width="90px" th:src="*{'data:emza/jpg;base64,'+{form.getAnbaremza()}}" class="img-responsive"
                             style="direction: ltr;">
                        <th:block sec:authorize="hasAuthority('OP_ANBARDAR')">
                            <form th:action="@{/saveEmza}" method="post">
                                <input type="hidden" name="uid" th:value="${user.id}">
                                <input type="hidden" name="fid" th:value="${form.id}">
                                <input th:if="${form.getAnbaremza() != null}" type="submit" class="btn btn-success"
                                       value="تایید شد" disabled>
                                <input th:if="${form.getAnbaremza()== null}" type="submit" class="btn btn-warning"
                                       value="تایید?">
                            </form>
                        </th:block>
                    </th>
                </th:block>

            </tr>
            <tr>
                <th th:if="${form.sedaemza} != null">امضا صدابردار<br>
                    <img width="90px" th:src="*{'data:emza/jpg;base64,'+{form.sedaemza}}" class="img-responsive"
                         style="direction: ltr;">
                </th>
                <th th:if="${form.tasviremza} != null"><p>امضا تصویر بردار</p><br>
                    <img width="100px" th:src="*{'data:emza/jpg;base64,'+{form.tasviremza}}" class="img-responsive"
                         style="direction: ltr;">
                </th>

                <td th:if="${form.tasviremza2} != null"><p>امضا تصویر بردار5</p><br>
                    <img width="100px" th:src="*{'data:emza/jpg;base64,'+{form.tasviremza2}}" class="img-responsive"
                         style="direction: ltr;">
                </td>
                <td th:if="${form.tasviremza3} != null"><p>امضا تصویر بردار6</p><br>
                    <img width="100px" th:src="*{'data:emza/jpg;base64,'+{form.tasviremza3}}" class="img-responsive"
                         style="direction: ltr;">
                </td>
                <td th:if="${form.tasviremza2} != null"><p>امضا تصویر بردار2</p><br>
                    <img width="100px" th:src="*{'data:emza/jpg;base64,'+{form.tasviremza2}}" class="img-responsive"
                         style="direction: ltr;">
                </td>
                <td th:if="${form.tasviremza3} != null"><p>امضا تصویر بردار3</p><br>
                    <img width="100px" th:src="*{'data:emza/jpg;base64,'+{form.tasviremza3}}" class="img-responsive"
                         style="direction: ltr;">
                </td>
            </tr>
        </table>

        <th:block sec:authorize="hasAuthority('OP_HAML_NAGHL')">
            <table style="direction: rtl;" class="table table-hover" border="1">
                <tr>
                    <th width="300px">خودروی شماره..
                        <button th:if="${!form.getCar().isEmpty()}"
                                th:text="${form.getCar().get(0).getName()}"></button>
                        ..به رانندگی آقای..
                        <button>[[${form.ranande}]]</button>
                        ..شماره کارمندی..
                        <button>[[${form.ranandeid}]]</button>
                        ..میتواند جهت آفیش فوق از محوطه خارج شود
                        <th:block sec:authorize="hasAuthority('OP_HAML_NAGHL')">
                            <form th:action="@{/saveEmza}" method="post">
                                <select th:if="${form.getHamlonaghlemza() == null}" name="tid" dir="ltr">
                                    <option>انتخاب راننده</option>
                                    <option th:each="us :${userss}" th:value="${us.id}">[[${us.fullname}]]</option>
                                </select>
                                <select th:if="${form.getHamlonaghlemza() == null}" name="car" dir="ltr">
                                    <option>انتخاب وسیله نقلیه</option>
                                    <option th:each="car :${cars}" th:value="${car.getId()}"
                                            th:text="${car.getName()}"></option>
                                </select>
                                <input type="hidden" name="fid" th:value="${form.id}">
                                <input type="hidden" name="uid" th:value="${user.id}">
                                <input th:if="${form.getHamlonaghlemza() == null}" type="submit" class="btn btn-info"
                                       value="تایید">
                                <input th:if="${form.getHamlonaghlemza() != null}" type="submit" class="btn btn-success"
                                       value="تایید شد" disabled>
                            </form>
                        </th:block>
                    </th>
                    <th th:if="${form.hamlonaghlemza} != null">
                        مسئول حمل و نقل<br>
                        <img width="90px" th:src="*{'data:emza/jpg;base64,'+{form.hamlonaghlemza}}" class="img-responsive"
                             style="direction: ltr;">
                    </th>

                </tr>
            </table>

        </th:block>

        <th:block sec:authorize="hasAuthority('OP_HERASAT')">
            <table border="3">
                <tr border="3">

                        <th:block
                                sec:authorize="hasAnyAuthority('OP_ANBARDAR','OP_MODIR_POSHTIBANIT','OP_TAHIEKONANDEH','OP_HERASAT')"
                                th:each="t : ${form.getTajhizatss()}" id="blk">
                            <div th:text="${t.getName()}"></div>
                        </th:block>

                </tr>
                <tr>

                    <td>

                        <br>خروج اشیا فوق در ساعت [[${form.saatkhoroj}]] از مرکز تایید می شود<br>
                        <img th:if="${form.khherasatemza} != null" width="90px"
                             th:src="*{'data:emza/jpg;base64,'+{form.khherasatemza}}" class="img-responsive"
                             style="direction: ltr;">
                        <th:block sec:authorize="hasAuthority('OP_HERASAT')">
                            <form th:action="@{/saveEmza}" method="post">
                                <input type="hidden" name="uid" th:value="${user.id}">
                                <input type="hidden" name="fid" th:value="${form.id}">
                                <input type="hidden" name="tid" value="2">
                                <input th:if="${form.getKhherasatemza() == null}" type="submit" class="btnn"
                                       value="تایید">
                                <input th:if="${form.getKhherasatemza() != null}" type="submit" class="btnn"
                                       value="تایید" disabled>
                            </form>
                        </th:block>
                    </td>
                    <td>ورود اشیا فوق در ساعت [[${form.saatvorod}]] به مرکز تایید میشود<br>
                        <img th:if="${form.vherasatemza} != null" width="90px"
                             th:src="*{'data:emza/jpg;base64,'+{form.vherasatemza}}" class="img-responsive"
                             style="direction: ltr;">

                        <th:block sec:authorize="hasAuthority('OP_HERASAT')">
                            <form th:action="@{/saveEmza}" method="post">
                                <input type="hidden" name="uid" th:value="${user.id}">
                                <input type="hidden" name="fid" th:value="${form.id}">
                                <input type="hidden" name="tid" value="1">
                                <input th:if="${form.getVherasatemza() == null}" type="submit" class="btnn"
                                       value="تایید">
                                <input th:if="${form.getVherasatemza() != null}" type="submit" class="btnn"
                                       value="تایید شد" disabled>
                            </form>
                        </th:block>
                    </td>

                </tr>

            </table>
        </th:block>
        <br>
    </div>
</div>
</body>
</html>